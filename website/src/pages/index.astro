---
import Main from '../layout/Main.astro';

import {
  catppuccinFlavours,
  catppuccinAccentColours,
  catppuccinBaseColours,
} from '../constants/catppuccin.ts';
---

<Main>
  <div class='min-h-screen w-2/3 mx-a py-16'>
    <div>
      <div>
        <h1 class='relative text-6xl leading-[1] font-extrabold pb-2'>
          Catppuccin
        </h1>
        <span class='text-[--ctp-subtext1] text-md'
          >ðŸŒ¸ Soothing pastel theme for UnoCSS!</span
        >
      </div>
    </div>
    <div class='mt-12 space-y-8'>
      <div>
        <h2 class='text-3xl font-extrabold mb-6'>Flavours</h2>
        <div class='flex flex-wrap gap-2 items-end'>
          {
            catppuccinFlavours.map(flavour => {
              const randomWidth = Math.floor(Math.random() * 128) + 48;

              return (
                <button
                  type='button'
                  class={`text-ctp-${flavour}-text bg-ctp-${flavour}-surface1 h-12 p-2 rounded-8 hover:bg-ctp-${flavour}-surface2 font-semibold cursor-pointer min-w-fit`}
                  style={`width: ${randomWidth}px;`}
                  data-flavour={flavour}
                  data-before-emoji={
                    { latte: 'ðŸŒ»', frappe: 'ðŸª´', macchiato: 'ðŸŒº', mocha: 'ðŸŒ¿' }[
                      flavour
                    ]
                  }
                >
                  {flavour.charAt(0).toUpperCase() + flavour.slice(1)}
                </button>
              );
            })
          }
        </div>
      </div>
      <div>
        <h2 class='text-3xl font-extrabold mb-6'>Accent Colours</h2>
        <div class='flex flex-wrap gap-2 items-end'>
          {
            catppuccinAccentColours.map(colour => {
              const randomWidth = Math.floor(Math.random() * 128) + 48;

              return (
                <span
                  class={`bg-[--ctp-${colour}] rounded-full h-12 transition-transform duration-300 ease hover:scale-y-120`}
                  style={`width: ${randomWidth}px;`}
                  title={colour}
                />
              );
            })
          }
        </div>
      </div>
      <div>
        <h2 class='text-3xl font-extrabold mb-6'>Base Colours</h2>
        <div class='flex flex-wrap gap-2 items-end'>
          {
            catppuccinBaseColours.map(colour => {
              const randomWidth = Math.floor(Math.random() * 128) + 48;

              return (
                <span
                  class={`bg-[--ctp-${colour}] rounded-full h-12 transition-transform duration-300 ease hover:scale-y-120`}
                  style={`width: ${randomWidth}px;`}
                  title={colour}
                  data-colour-name={colour}
                />
              );
            })
          }
        </div>
      </div>
    </div>
  </div>
</Main>

<style>
  button[data-before-emoji]::before {
    content: attr(data-before-emoji);
  }

  span[data-colour-name='base'] {
    outline: 1px solid var(--ctp-text);
  }
</style>

<script>
  const buttons = document.querySelectorAll('button[data-flavour]');

  buttons.forEach(button => {
    button.addEventListener('click', () => {
      const flavour = button.getAttribute('data-flavour');

      if (flavour) {
        document.documentElement.setAttribute(
          'data-catppuccin-flavour',
          flavour
        );
      }
    });
  });
</script>
